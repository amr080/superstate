import{x,z as g,y as k,a9 as T,as as H}from"./DQdV9-Hx.js";import{a as I,b as M,i as F,c as S}from"./BvJ784Dc.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="b4779cda-8b59-4104-859a-3508605b7618",t._sentryDebugIdIdentifier="sentry-dbid-b4779cda-8b59-4104-859a-3508605b7618")}catch{}})();function P(t,r,o){x(()=>{var n=g(()=>r(t,o==null?void 0:o())||{});if(o&&(n!=null&&n.update)){var e=!1,s={};k(()=>{var i=o();T(i),e&&H(s,i)&&(s=i,n.update(i))}),e=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function z(t){const r=JSON.parse(t);return r.data&&(r.data=I(r.data,M.decoders)),r}function u(t){return HTMLElement.prototype.cloneNode.call(t)}function R(t,r=()=>{}){const o=async({action:e,result:s,reset:i=!0,invalidateAll:c=!0})=>{s.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(t),c&&await F()),(location.origin+location.pathname===e.origin+e.pathname||s.type==="redirect"||s.type==="error")&&S(s)};async function n(e){var p,y,w,h,A;if(((p=e.submitter)!=null&&p.hasAttribute("formmethod")?e.submitter.formMethod:u(t).method)!=="post")return;e.preventDefault();const i=new URL((y=e.submitter)!=null&&y.hasAttribute("formaction")?e.submitter.formAction:u(t).action),c=(w=e.submitter)!=null&&w.hasAttribute("formenctype")?e.submitter.formEnctype:u(t).enctype,l=new FormData(t),f=(h=e.submitter)==null?void 0:h.getAttribute("name");f&&l.append(f,((A=e.submitter)==null?void 0:A.getAttribute("value"))??"");const m=new AbortController;let b=!1;const D=await r({action:i,cancel:()=>b=!0,controller:m,formData:l,formElement:t,submitter:e.submitter})??o;if(b)return;let d;try{const a=new Headers({accept:"application/json","x-sveltekit-action":"true"});c!=="multipart/form-data"&&a.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(c)?c:"application/x-www-form-urlencoded");const L=c==="multipart/form-data"?l:new URLSearchParams(l),E=await fetch(i,{method:"POST",headers:a,cache:"no-store",body:L,signal:m.signal});d=z(await E.text()),d.type==="error"&&(d.status=E.status)}catch(a){if((a==null?void 0:a.name)==="AbortError")return;d={type:"error",error:a}}D({action:i,formData:l,formElement:t,update:a=>o({action:i,result:d,reset:a==null?void 0:a.reset,invalidateAll:a==null?void 0:a.invalidateAll}),result:d})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}export{P as a,z as d,R as e};
//# sourceMappingURL=CLt49ywg.js.map
