import{p as L,i as x,a as T}from"./entry.CNWWqpSN.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="04428510-34fa-406b-975c-ad9acb435dde",t._sentryDebugIdIdentifier="sentry-dbid-04428510-34fa-406b-975c-ad9acb435dde")}catch{}})();function k(t){const r=JSON.parse(t);return r.data&&(r.data=L(r.data)),r}function d(t){return HTMLElement.prototype.cloneNode.call(t)}function M(t,r=()=>{}){const l=async({action:a,result:c,reset:n=!0,invalidateAll:i=!0})=>{c.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(t),i&&await x()),(location.origin+location.pathname===a.origin+a.pathname||c.type==="redirect"||c.type==="error")&&T(c)};async function u(a){var b,y,w,h,A;if(((b=a.submitter)!=null&&b.hasAttribute("formmethod")?a.submitter.formMethod:d(t).method)!=="post")return;a.preventDefault();const n=new URL((y=a.submitter)!=null&&y.hasAttribute("formaction")?a.submitter.formAction:d(t).action),i=(w=a.submitter)!=null&&w.hasAttribute("formenctype")?a.submitter.formEnctype:d(t).enctype,s=new FormData(t),f=(h=a.submitter)==null?void 0:h.getAttribute("name");f&&s.append(f,((A=a.submitter)==null?void 0:A.getAttribute("value"))??"");const m=new AbortController;let p=!1;const E=await r({action:n,cancel:()=>p=!0,controller:m,formData:s,formElement:t,submitter:a.submitter})??l;if(p)return;let o;try{const e=new Headers({accept:"application/json","x-sveltekit-action":"true"});i!=="multipart/form-data"&&e.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(i)?i:"application/x-www-form-urlencoded");const D=i==="multipart/form-data"?s:new URLSearchParams(s),g=await fetch(n,{method:"POST",headers:e,cache:"no-store",body:D,signal:m.signal});o=k(await g.text()),o.type==="error"&&(o.status=g.status)}catch(e){if((e==null?void 0:e.name)==="AbortError")return;o={type:"error",error:e}}E({action:n,formData:s,formElement:t,update:e=>l({action:n,result:o,reset:e==null?void 0:e.reset,invalidateAll:e==null?void 0:e.invalidateAll}),result:o})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",u)}}}export{k as d,M as e};
//# sourceMappingURL=forms.BXxphAvd.js.map
